import{_ as R,g as G,r as d,d as H,x,o as u,c,a,F as B,e as E,n as J,f as $,m as K,v as P}from"./BN38_k43.js";import{v as Q}from"./D9pVNrrP.js";import{l as U}from"./C4JABX51.js";import{a as X}from"./BLeuX3p3.js";import{f as Y}from"./BFFptIQh.js";import{t as Z}from"./Cyx_fxkF.js";import{s as V}from"./DJxVhClu.js";import{s as ee}from"./BjZe4u12.js";const se={key:0,class:"slider-container",id:"slider-container"},te={class:"slider-void"},le={class:"slider",id:"slider",ref:"slider"},ie=["src"],ae={class:"slider-sub-wrapper"},ne=["onClick"],oe={class:"slide-move"},de={class:"work-move"},re={__name:"ImageSlider",setup(ve){V();const y=ee(),j=G(()=>r.value),S=d(Q.data),r=d(null),W=d(!0),m=d(!1),g=d(!1),z=d(-1),t=d(0),i=d(0),N=d([]),C=d([]),I=d([]),w=d([]);function f(s){let e=[];function l(h){h.forEach(o=>{o.content_type==="image"&&o.slider&&(e.push(o),e[e.length-1].links=[],e[e.length-1].links.push(e[e.length-1].content)),o.content_type==="sub-grid"&&o.content&&l(o.content)})}return s.narrative&&l(s.narrative),e}function F(s){if(!g.value)return;z.value=-1;let e=document.querySelector("#slider").getElementsByClassName("slide");document.body.classList.add("no-scroll"),document.getElementById("slider-container").classList.toggle("active"),document.getElementById("slider-container").classList.toggle("activate-display"),t.value=s,i.value=0,m.value=r.value[t.value].links.length>1,e[t.value].classList.add("active"),e[t.value].getElementsByTagName("img")[0].classList.remove("hidden"),_("+")}function q(){g.value=!1,n()[t.value].classList.remove("active"),document.body.classList.remove("no-scroll"),document.getElementById("slider-container").classList.toggle("active"),document.getElementById("slider-container").classList.toggle("activate-display")}function n(){return document.querySelector("#slider").getElementsByClassName("slide")}function p(s){let e=n()[t.value].getElementsByTagName("img");return s=="+"?e&&i?e.length>1&&i.value+1<e.length:!1:s=="0"?(i.value=0,!!(e&&i)):e&&i?i.value>0:!1}function L(s){s=="+"?(t.value==n().length-1?t.value=0:t.value+=1,i.value=0):(t.value==0?t.value=n().length-1:t.value-=1,i.value=n()[t.value].getElementsByTagName("img").length-1)}function k(){S.value[t.value].links.length>1?m.value=!0:m.value=!1}function A(s){let e=n()[t.value].getElementsByClassName("slider-sub-switch");if(e){for(let l=0;l<e.length;l++)e[l].classList.remove("active");s=="+"||s=="0"?e[0].classList.add("active"):e[e.length-1].classList.add("active")}}function _(s){p(s)&&A(s)}function b(s){let e=n();if(e[t.value].classList.add("active"),s=="+")e[t.value].getElementsByTagName("img")[0].classList.remove("hidden");else{let l=e[t.value].getElementsByTagName("img");l[l.length-1].classList.remove("hidden")}}function v(s,e){let l=n()[t.value].getElementsByClassName("slider-sub-switch");l&&(e=="add"?l[i.value].classList.add(s):l[i.value].classList.remove(s))}function D(){let e=n()[t.value].getElementsByTagName("img");p("+")?(e[i.value].classList.add("hidden"),v("active","remove"),i.value+=1,e[i.value].classList.remove("hidden"),v("active","add")):T()}function M(){let s=n(),e=s[t.value].getElementsByTagName("img");p("-")?(e[i.value].classList.add("hidden"),v("active","remove"),i.value-=1,e[i.value].classList.remove("hidden"),v("active","add")):(s[t.value].classList.remove("active"),e[i.value].classList.add("hidden"),v("active","remove"),L("-"),k(),_("-"),b("-"))}function T(){let s=n(),e=s[t.value].getElementsByTagName("img");s[t.value].classList.remove("active"),e[i.value].classList.add("hidden"),v("active","remove"),L("+"),k(),_("+"),b("+")}function O(){let s=n(),e=s[t.value].getElementsByTagName("img");s[t.value].classList.remove("active"),e[i.value].classList.add("hidden"),v("active","remove"),L("-"),k(),_("0"),b("+")}return H(()=>{N.value=f(U.data),C.value=f(Z.data),I.value=f(Y.data),w.value=f(X.data)}),x(()=>y.getImgCategory,s=>{s==="visualization"&&(r.value=S.value),s==="archipelago"&&(r.value=w.value),s==="luthierhouse"&&(r.value=N.value),s==="farnsworthhouse"&&(r.value=I.value),s==="toymuseum"&&(r.value=C.value)}),x(()=>y.getImgIndex,s=>{s!==-1&&s!==void 0&&!g.value&&(y.setImgIndex(-1),g.value=!0,F(s))}),(s,e)=>W.value===!0?(u(),c("div",se,[a("div",te,[a("div",{class:"void-top",onClick:e[0]||(e[0]=l=>q())},e[5]||(e[5]=[a("div",null,"тип",-1)])),e[8]||(e[8]=a("div",{class:"void-bottom"},[a("div",{class:"slider-switches"},[a("div",{class:"slider-switch-wrapper"})])],-1)),a("div",le,[(u(!0),c(B,null,E(j.value,l=>(u(),c("div",{key:l.id,class:"slide"},[l.visibility?(u(!0),c(B,{key:0},E(l.links,(h,o)=>(u(),c("img",{key:o,src:h,alt:"",class:J({hidden:o!==0})},null,10,ie))),128)):$("",!0),a("div",ae,[(u(!0),c(B,null,E(l.links,(h,o)=>K((u(),c("div",{key:o,class:"slider-sub-switch",onClick:ue=>s.moveManual(o)},null,8,ne)),[[P,m.value]])),128))])]))),128)),a("div",oe,[a("div",{class:"move-left",onClick:e[1]||(e[1]=l=>M())}),a("div",{class:"move-right",onClick:e[2]||(e[2]=l=>D())})]),a("div",de,[a("div",{class:"work-move-left",onClick:e[3]||(e[3]=l=>O())},e[6]||(e[6]=[a("span",null,"prev",-1)])),a("div",{class:"work-move-right",onClick:e[4]||(e[4]=l=>T())},e[7]||(e[7]=[a("span",null,"next",-1)]))])],512)])])):$("",!0)}},Le=R(re,[["__scopeId","data-v-ec93dc2d"]]);export{Le as _};
